<form action="/job/update/<%= curJob.jobId %>" method="post" class="job-form">
  <div class="job-category-wrapper">
    <select
      required
      class="form-select"
      aria-label="Default select example"
      name="jobCategory"
      id="category"
    >
      <option disabled>Select Job Category</option>
      <option value="Tech">Tech</option>
      <option value="Non Tech">Non Tech</option>
    </select>
  </div>
  <div class="job-designation-wrapper">
    <select
      required
      class="form-select"
      aria-label="Default select example"
      name="jobDesignation"
      id="designation"
    >
      <option disabled>Select Job Designation</option>
      <option value="HR">HR</option>
      <option value="SDE">SDE</option>
      <option value="DevOps">DevOps</option>
      <option value="MERN Developer">MERN Developer</option>
      <option value="MEAN Developer">MEAN Developer</option>
      <option value="JAVA Developer">JAVA Developer</option>
      <option value="Front-End Developer">Front-End Developer</option>
      <option value="Back-End Developer">Back-End Developer</option>
      <option value="Full-Stack Developer">Full-Stack Developer</option>
    </select>
  </div>
  <div class="form-floating mb-3">
    <input
      required
      type="text"
      class="form-control"
      id="jobLocation"
      placeholder="Delhi"
      name="jobLocation"
      value="<%=curJob.jobLocation%>"
    />
    <label for="jobLocation">Enter Job Location</label>
  </div>
  <div class="form-floating mb-3">
    <input
      required
      type="text"
      class="form-control"
      id="companyName"
      placeholder="Delhi"
      name="companyName"
      value="<%=curJob.companyName%>"
    />
    <label for="companyName">Company Name</label>
  </div>
  <div class="salary-totalOpening">
    <div class="form-floating mb-3">
      <input
        required
        type="text"
        class="form-control"
        id="enterSalary"
        placeholder="Delhi"
        name="enterSalary"
        value="<%=curJob.salary%>"
      />
      <label for="enterSalary">Enter Salary in lpa</label>
    </div>
    <div class="form-floating mb-3">
      <input
        required
        type="number"
        class="form-control"
        id="position"
        placeholder="Delhi"
        name="position"
        value="<%=curJob.totalOpening%>"
      />
      <label for="position">Total Number of Position</label>
    </div>
  </div>
  <div class="skills-date">
    <div class="skills-wrapper">
      <select
        required
        multiple=""
        name="skillsRequired"
        class="form-select"
        aria-label="Default select example"
        id="skillsSelect"
      >
        <option selected="" disabled="">
          Select skills required for this job
        </option>
        <option value="React">React</option>
        <option value="NodeJs">NodeJs</option>
        <option value="Angular">Angular</option>
        <option value="MongoDB">MongoDB</option>
        <option value="SQL">SQL</option>
        <option value="Express">Express</option>
        <option value="Java">Java</option>
        <option value="SpringBoot">SpringBoot</option>
        <option value="C++">C++</option>
        <option value="Data Structures &amp; Algo">
          Data Structures &amp; Algo
        </option>
      </select>
    </div>
    <div class="date">
      <span class="input-group-text">Apply By</span>
      <input
        name="applyBy"
        type="date"
        class="form-control"
        aria-label="Server"
        value="<%=curJob.applyBy%>"
      />
    </div>
  </div>
  <button
    type="button"
    class="btn btn-success"
    data-bs-toggle="modal"
    data-bs-target="#updateModal"
  >
    Update
  </button>
  <div
    class="modal fade"
    id="updateModal"
    tabindex="-1"
    aria-labelledby="exampleModalLabel"
    aria-hidden="true"
    data-bs-theme="dark"
  >
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">Confirm</h1>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>
        <div class="modal-body">Are you sure you want to update the job</div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-secondary"
            data-bs-dismiss="modal"
          >
            No
          </button>
          <button type="submit" class="btn btn-primary">Yes</button>
        </div>
      </div>
    </div>
  </div>
</form>
<script>
  let selectedValue = "<%=curJob.jobDesignation%>";
  let selectElement = document.getElementById("designation");
  for (let i = 0; i < selectElement.options.length; i++) {
    if (selectElement.options[i].value === selectedValue) {
      selectElement.options[i].selected = true;

      break;
    }
  }
  selectedValue = "<%=curJob.category%>";
  selectElement = document.getElementById("category");
  for (let i = 0; i < selectElement.options.length; i++) {
    if (selectElement.options[i].value === selectedValue) {
      selectElement.options[i].selected = true;

      break;
    }
  }
  const skillsSelect = document.getElementById("skillsSelect");

  const selectedSkills = "<%= curJob.skills %>";

  for (let i = 0; i < skillsSelect.options.length; i++) {
    if (selectedSkills.includes(skillsSelect.options[i].value)) {
      skillsSelect.options[i].selected = true;
    }
  }
</script>
